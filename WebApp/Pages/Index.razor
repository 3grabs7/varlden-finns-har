@page "/"
@inject ISeedService _seedService

<div>
    <p>Skolans namn</p>
    <p>Lärarens Namn</p>
    <p>Kommun</p>
    <a class="match-link">Läs mer</a>
</div>
<Divider />

<Steps SelectedStep="@selectedStep" SelectedStepChanged="@OnSelectedStepChanged">
    <Items>
        <Step Name="step1">Step 1</Step>
        <Step Name="step2">Step 2</Step>
        <Step Name="step3">Step 3</Step>
        <Step Name="step4">
            <Marker>
                <Icon Name="IconName.Flag" />
            </Marker>
            <Caption>
                Finish
            </Caption>
        </Step>
    </Items>
    <Content>
        <StepPanel Name="step1">
            Content for step 1.
        </StepPanel>
        <StepPanel Name="step2">
            Content for step 2.
        </StepPanel>
        <StepPanel Name="step3">
            Content for step 3.
        </StepPanel>
        <StepPanel Name="step4">
            Content for finish.
        </StepPanel>
    </Content>
</Steps>


@if (loading is null)
{<p>Database seeded and ready</p> }
else
{
    <div class="@(loading == true ? "loader" : "")"></div>
    if (loading == false)
    {
        <Button Clicked="@Seed" Color="Color.Primary">
            Reset And Seed Db
        </Button>
    }
}


@code {
    private bool? loading { get; set; } = false;

    private async Task Seed()
    {
        loading = true;
        await _seedService.ResetAsync();
        await _seedService.AddTeacherRegistrationForm(10);
        await _seedService.AddTimeSpanToTeacherRegistrationForm(10);
        await _seedService.AddSubjects();
        await _seedService.AddMunicipality();
        await _seedService.AddWeeks(2021);
        await Task.Delay(1000);
        loading = null;
    }


    string selectedStep = "step1";

    private Task OnSelectedStepChanged(string name)
    {
        selectedStep = name;

        return Task.CompletedTask;
    }


}
